<!DOCTYPE html>
<html>
<head>

	<!-- <title>Maps Widget</title> -->

	<meta charset="utf-8">
	<meta content="width=device-width, initial-scale=1.0" name="viewport">

	<!-- JS Links -->
	<script src="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.js"></script>
	<!-- <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script> -->
	<!-- <script src="https://raw.githubusercontent.com/stefanocudini/leaflet-search/master/src/leaflet-search.js" type="text/javascript" ></script> -->

	<!-- CSS Links -->
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.css" />
	<!-- <link rel="stylesheet" type="text/css" href="foundation.css" /> -->
	<!-- <link rel="stylesheet" type="text/css" href="https://raw.githubusercontent.com/stefanocudini/leaflet-search/master/src/leaflet-search.css"> -->

	<style type="text/css">
		
		#map { height: 100%; width: 100%; }

		.leaflet-popup-content {	min-width:100px;	}

		.popup-add-content-button { background-color: #199369; color: #FFFFFF; display: block; float: left; padding: 1px 2px;	}

		.popup-delete-content-button { background-color: #F04124; color: #FFFFFF; display: inline-block; float: right; padding: 1px 2px;	}		
	</style>

</head>

<body>

	<div id="map"></div>
	
	<script type="text/javascript">

	 	// We’ll add a tile layer to add to our map, in this case it’s a OSM tile layer.
	 	// Creating a tile layer usually involves setting the URL template for the tile images
	 	var osmUrl 	  = 'http://{s}.tile.osm.org/{z}/{x}/{y}.png',
	 	osmAttrib = '&copy; <a href="http://openstreetmap.org/copyright">OpenStreetMap</a> contributors',
	 	osm 	  = L.tileLayer(osmUrl, {maxZoom: 18, attribution: osmAttrib});
	 	
	 	// initialize the map on the "map" div with a given center and zoom
	 	var map = L.map('map').setView([25.92,79.84], 5).addLayer(osm);


	 	// map.addControl( new L.Control.Search({layer: searchLayer}) );

	 	markerGeoJSON = [];

		// Script for adding marker on map click
		function onMapClick(e) {

			var marker = L.marker(e.latlng, {
				// draggable:true,
				title:"Resource location",
				alt:"Resource Location",
				riseOnHover:true
			}).addTo(map)
				// .bindPopup(e.latlng.toString()).openPopup();
				// .bindPopup($(".popup-html").html()).openPopup();
				
			markerGeoJSON.push(JSON.stringify(marker.toGeoJSON()));
			// marker.on("popupopen", function(){

				// alert("kljhkj");
				// $(".popup-delete-content-button").click(function(){map.removeLayer(this)});
			// })


			// marker.on("dragstart",function(ev){
			// 	aaa = this.toGeoJSON();//.latlng.toString();
			// });

			// Update marker on changing it's position
			// marker.on("dragend",function(ev){

			// 	var changedPos = ev.target.getLatLng();
				

   //          	this.setLatLng(changedPos).update();	// Update the marker position
   //          	// map.removeLayer(this);

   //          	this.setPopupContent(changedPos.toString()).openPopup();	// Updating popup Msg
   //          	// abc = this.toGeoJSON();
   //          	// alert(this._leaflet_id);
   //          });



			// marker.on("contextmenu", function(){(alert("hii"))});
		}

		// function removeMarker(markerEl){
		// 	alert($(markerEl).html());
		// 	map.removeLayer(markerEl);
		// }

		// function addPump(){
		// 	var pump = L.marker(cords,{icon: truckPump}).addTo(map).bindPopup($('<a href="#" class="speciallink">Remove ME</a>').click(function() {
		// 		map.removeLayer(pump);
		// 	})[0]);
		// }

		map.on('click', onMapClick);

	</script>

<!-- 	<div style="display:none;">
		<div class="popup-html">
			<div class="popup-content"></div>
			<div class="row">
				<div class="popup-add-content-button" > + Content </div>			
				<div class="popup-delete-content-button"> Delete </div>			
			</div>
		</div>
	</div>
 -->
</body>
</html>



<!-- 

=======================================================

http://leafletjs.com/reference.html#geojson
http://leafletjs.com/examples/geojson.html
https://paulcrickard.wordpress.com/tag/geojson/
https://www.mapbox.com/blog/open-web-geojson/

var geojsonFeature = {
    "type": "Feature",
    "properties": {
        "name": "Coors Field",
        "amenity": "Baseball Stadium",
        "popupContent": "This is where the Rockies play!"
    },
    "geometry": {
        "type": "Point",
        "coordinates": [-104.99404, 39.75621]
    }
};

GeoJSON objects are added to the map through a GeoJSON layer. To create it and add it to a map, we can use the following code:

L.geoJson(geojsonFeature).addTo(map);

Alternatively, we could create an empty GeoJSON layer and assign it to a variable so that we can add more features to it later.

var myLayer = L.geoJson().addTo(map);
myLayer.addData(geojsonFeature);


map.eachLayer(function(e){ console.log(e._leaflet_id); })

map.eachLayer(function(layer){
  if(layer.toGeoJSON){
    console.log(layer.toGeoJSON())
  }
});

// to modify geoJSON object aaa
$(aaa).attr("properties", '{"id":23}')


for search in OSM : https://github.com/twain47/Nominatim

=======================================================
 -->