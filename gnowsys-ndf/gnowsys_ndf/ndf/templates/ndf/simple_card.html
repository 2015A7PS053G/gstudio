{% load i18n %}
{% load ndf_tags %}
{% load simple_filters %}
<style type="text/css">
          
  .rating-stars > div {
      background-image:url("/static/ndf/images/stars.png");
      height: 17px;
    }
  </style>
 <div class="scard">

{% check_is_gstaff groupid request.user as gstaff_access %}
{% if first_arg and second_arg and third_arg %}
  <a href="{% url url_name first_arg second_arg third_arg %}{{search_url_text|safe}}">
{% elif first_arg and second_arg %}
  <a href="{% url url_name first_arg second_arg %}{{search_url_text|safe}}">
{% elif first_arg %}
  <a href='{% url url_name first_arg %}{{search_url_text|safe}}'>
{% endif %}
<div class="scard-image" title="{% firstof resource.altnames resource.name %}">
    
    {% get_dict_from_list_of_dicts resource.attribute_set as attr_set_dict %}
    {% if resource.fs_file_ids.1 %}
    <img src="{% url 'get_mid_size_img' first_arg second_arg %}" alt="">
    {% elif resource.collection_set %}
        <i class="collection"></i>
    {% elif "File" in resource.member_of_names_list %}
      {% if attr_set_dict.educationaluse and attr_set_dict.educationaluse != "Documents" %}
        <i class="{{attr_set_dict.educationaluse|lower}}"></i>
      {% else %}
        <i class="{{resource.mime_type|lower|split:'/'|join:' '}}"></i>
      {% endif %}
    {% elif "PartnerGroup" in resource.member_of_names_list or "Course" in resource.member_of_names_list or has_logo == True %}
      {% if "Course" in resource.member_of_names_list or has_logo == True %}
        {% get_relation_value resource.pk 'has_logo' as logo_img_and_grel_hl %}
        {% if logo_img_and_grel_hl.0 %}
          {% get_node logo_img as logo_img_and_grel_hl.0 %}
          {% if logo_img_and_grel_hl.0.fs_file_ids.1 %}
            <img src="{% url 'get_gridfs_resource' logo_img_and_grel_hl.0.fs_file_ids.1 %}" alt="" />
          {% endif %}
        {% endif %}

      {% else %}
        {% get_relation_value resource.pk 'has_profile_pic' as logo_img_and_grel_pp %}
        {% if logo_img_and_grel_pp.0 %}
          {% get_node logo_img as logo_img_and_grel_pp.0 %}
          {% if logo_img_and_grel_pp.0.fs_file_ids.1 %}
            <img src="{% url 'get_gridfs_resource' logo_img_and_grel_pp.0.fs_file_ids.1 %}" alt="" />
          {% endif %}
        {% endif %}

      {% endif %}

    {% elif resource.collection_set %}
        <i class="collection"></i>
    {% else %}
      <i class="{{resource.member_of_names_list.0|lower}}"></i>
    {% endif %}
  </div>
</div>

  <div class="scard-content">
   <span class="scard-title">{% firstof resource.altnames resource.name|truncatechars:25 %}</span>
    <!-- {% get_node_ratings request resource.pk as ratings %} -->
            <!-- <div class="rating-stars center" style="width:{{ratings.avg|multiply:16}}px;"> <!-- 16px = 1 star -->
              <!-- <div></div>
            </div> --> 
    
   
    </div>

    <div class="scard-desc" title="{{resource.content_org}}">
     {{resource.content_org|default_if_none:"Add some description."|truncatechars:60}}
    </div>   


  <div class="scard-action">
    <i>{{resource.created_at|date:"d-m-Y"}}</i>
     {% if gstaff_access %}
     </a> <input type="checkbox" style="margin:0; float:right;" class="filenode" name="filenode" value="{{resource.pk}}">
    {% endif %}
  </div>
</a>
