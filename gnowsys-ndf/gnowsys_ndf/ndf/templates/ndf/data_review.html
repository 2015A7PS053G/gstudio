{% extends "ndf/base.html" %}
{% load i18n %}
{% load ndf_tags %}
{% load pagination_tags %}
{% get_group_name groupid as group_name_tag %}

{% block style %}

	.right-border{
		border-right: 1px solid #dddddd
	}

	.bottom-border > th {
		border-bottom: 1px solid #f1f1f1;
	}

	article.columns{
		padding-bottom: 0;
		margin-bottom: 2em;
	}

	.expand-width-6{
		padding: 0 6em;
	}

	.expand-width-3{
		padding: 0 3em;
	}

	.hide-el{
		visibility: hidden;
	}

	.show-el{
		visibility: visible;
	}
	
{% endblock %}

{% block body_content %}

<br/>	
<table style="width:auto">
<!-- <table> -->
	<thead>
		<tr>
			<th class="text-center right-border" colspan="5">Autogenerated</th>
			<th class="text-center right-border" colspan="5">Base</th>
			<th class="text-center right-border" colspan="7">Attribution</th>
			<th class="text-center right-border" colspan="2">LRMI</th>
			<th class="text-center right-border" colspan="3">Alignment & Level</th>
			<th class="text-center right-border" colspan="7">Curate</th>
			<th class="text-center right-border" colspan="2">Advance</th>
		</tr>
		<tr class="bottom-border">
			<!-- Autogenerated -->
			<th>Id</th>
			<th class="expand-width-3">Creation date</th>
			<th>Modified by</th>
			<th>Author</th>
			<th class="right-border">Contributors</th>

			<!-- Base -->
			<th class="expand-width-6">Name</th>
			<th class="expand-width-3">Altname</th>
			<th class="expand-width-6">content_org</th>
			<th>Language</th>
			<th class="right-border">tags</th>

			<!-- Attribution -->
			<th>Created by</th>
			<th>Contributed by</th>
			<th class="expand-width-3">License</th>
			<th class="expand-width-3">Source</th>
			<th>Basenodeurl</th>
			<th>Translation of</th>
			<th class="right-border">Adaption of</th>

			<!-- LRMI -->
			<th>Educational use</th>
			<th class="right-border">Interactivity Type</th>

			<!-- Alignment and Level -->
			<th>Alignment</th>
			<th>Educational Level</th>
			<th class="right-border">Educational Subject</th>

			<!-- Curate -->
			<th>Curricular</th>
			<th class="expand-width-6">Audience</th>
			<th>Teaches</th>
			<th>Requires</th>
			<th>Featured</th>
			<th>Status</th>
			<th class="right-border">Acess Policy</th>

			<!-- Advance -->
			<th>Time Required</th>
			<th>Text Complexity</th>

		</tr>

	</thead>
	<tbody>
		<!-- Looping through each resource -->
		{% for resource in files %}
		<tr id="view-row-{{resource.pk}}">

			<!-- Autogenerated -->
			<td>{{ resource.pk }}</td>
			<td>{{ resource.created_at }}</td>
			<td>{{ resource.user_details_dict.modified_by }}</td>
			<td>{{ resource.author_set|safeseq|join:", "|default:"-" }}</td>
			<td class="right-border">{{ resource.user_details_dict.contributors | join:", " }}</td>
			
			<!-- Base -->
			<td>{{ resource.name }}</td>
			<td>{{ resource.altnames }}</td>
			<td title="{{ resource.content_org }}">{{ resource.content_org | truncatechars:60 }}</td>
			<td>{{ resource.language }}</td>
			<td class="right-border"> {{resource.tags|safeseq|join:", "}} </td>

			<!-- Attribution -->
			<td>{{ resource.user_details_dict.created_by }}</td>
			<td>{{ resource.user_details_dict.contributors | join:", " }}</td>
			<td>{{ resource.licence }}</td>
			<td>{{ resource.source }}</td>
			<td>{{ resource.basedonurl }}</td>
			<td>{{ resource.translation_of }}</td>
			<td class="right-border">{{ resource.adaption_of }}??</td>

			<!-- LRMI -->
			<td>{{ resource.educationaluse }}</td>
			<td class="right-border">{{ resource.interactivitytype }}</td>

			<!-- Alignment and Level -->
			<td>{{ resource.educationalalignment }}</td>
			<td>{{ resource.educationallevel }}</td>
			<td class="right-border">{{ resource.educationalsubject }}</td>

			<!-- Curate -->
			<td>{{ resource.curricular }}</td>
			<td>{{ resource.audience }}</td>
			<td>
				{% for each_teaches in resource.teaches %}
					{{ each_teaches.name }}
				{% endfor %}
			</td>
			<td><!-- prior_node processing -->
				{% for index_key, each_node in resource.prior_node_dict.items %}
					{{ each_node.name }}
				{% endfor %}
			</td>
			<td>{{ resource.featured }}</td>
			<td>{{ resource.status }}</td>
			<td class="right-border">{{ resource.access_policy }}</td>

			<!-- Advance -->
			<td>{{ resource.timerequired }}</td>
			<td class="right-border">{{ resource.textcomplexity }}</td>
			
		</tr>
		<tr></tr>
		<tr id="edit-row-{{resource.pk}}">
			<!-- Autogenerated -->
			<td class="right-border" colspan="5">
				<div class="button tiny expand" data-id="btn-{{resource.pk}}" onclick="editResRow('{{resource.pk}}')">
					Edit
				</div>
			</td>

			<!-- Base -->
			<td class="" data-field="name"><input type="text"/></td>
			<td class="" data-field="altnames"><input type="text"/></td>
			<td class="" data-field="content_org"><input type="button" class="button tiny expand" value="Edit content in editor" /></td>
			<td class="" data-field="language">
				<select name="language">
					
				</select>
			</td>
			<td class="right-border" data-field="tags"><input type="text"/></td>

			<!-- Attribution -->
			<td class="" data-field="created_by">
				<select name="created_by">
					
				</select>
			</td>
			<td class="" data-field="contributors">
				<select name="contributors">
					
				</select>
			</td>
			<td class="" data-field="license"><input type="text"/></td>
			<td class="" data-field="source"><input type="text"/></td>
			<td class="" data-field="basenodeurl"></td>
			<td class="" data-field="translation_of"></td>
			<td class="right-border" data-field="adaptation_of" ></td>

			<!-- LRMI -->
			<td class="" data-field="educationaluse">
				<select name="educationaluse">
					
				</select>
			</td>
			<td class="right-border" data-field="interactivitytype">
				<select name="interactivitytype">
					
				</select>
			</td>

			<!-- Alignment and Level -->
			<td class="" data-field="educationalalignment">
				<select name="educationalalignment">
					
				</select>
			</td>
			<td class="" data-field="educationallevel">
				<select name="educationallevel">
					
				</select>
			</td>
			<td class="right-border" data-field="educationalsubject">
				<select name="educationalsubject">
					
				</select>
			</td>

			<!-- Curate -->
			<td class="" data-field="curricular">
				<select name="curricular">
					
				</select>
			</td>
			<td class="" data-field="audience">
				<select name="audience">
					
				</select>
			</td>
			<td class="" data-field="teaches"></td>
			<td class="" data-field="prior_node"></td>
			<td class="" data-field="featured">
				<select name="featured">
					
				</select>
			</td>
			<td class="" data-field="status">
				<select name="status">
					
				</select>
			</td>
			<td class="right-border" data-field="access_policy">
				<select name="access_policy">
					
				</select>
			</td>

			<!-- Advance -->
			<td class="" data-field="timerequired"></td>
			<td class="" data-field="textcomplexity" class="right-border"></td>
		</tr>

		{% endfor %}
	</tbody>
</table>

<!-- END of Looping through each resource -->

{% endblock %}

<!-- Pagination -->
{% block data_review_pagination %}

	{% if page_info.num_pages > 1 %}

		<div class="pagination-centered">
			<ul class="pagination" role="menubar" aria-label="Pagination">
				
				{% if page_info.num_pages < 11 %}
				

					{% for each_page in page_info.page_range %}

						{% if page_info.current_page == each_page %}
						<li class="current">
						{% else %}
						<li>
						{% endif %}
							<a href="{% url 'data_review_page' group_name_tag each_page %}"> {{ each_page }} </a>
						</li>

					{% endfor %}
				
				{% else %}

					{% if page_info.has_previous %}

						<!-- for  << previous  text -->
						<li class="arrow">
							<a href="{% url 'data_review_page' group_name_tag page_info.previous_page %}">&laquo; Previous</a>
						</li>

						<!-- for page 1, page 2 and ... -->
						{% if page_info.previous_page|add:"-2" != 1 and page_info.previous_page|add:"-2" > 0 %}
							<li><a href="{% url 'data_review_page' group_name_tag 1 %}">1</a></li>
							<li><a href="{% url 'data_review_page' group_name_tag 2 %}">2</a></li>
							<li class="unavailable" aria-disabled="true"><span class="subheader">&hellip;</span></li>
						{% endif %}
			
						<!-- for previous page -->
						<li>
							<a href="{% url 'data_review_page' group_name_tag page_info.previous_page %}">
								{{ page_info.previous_page }}
							</a>
						</li>
					{% endif %}

					<!-- for current page -->
					<li class="current"><a href="">{{ page_info.current_page }}</a></li>
					

					{% if page_info.has_next %}

						<!-- for next page -->
						<li>
							<a href="{% url 'data_review_page' group_name_tag page_info.next_page %}">
								{{ page_info.next_page }}
							</a>
						</li>
						{% if page_info.next_page != page_info.num_pages %}
							
							{% if page_info.next_page != page_info.num_pages|add:"-1" %}

								<!-- for .... -->
								{% if page_info.next_page != page_info.num_pages|add:"-2" %}
									<li class="unavailable" aria-disabled="true"><span class="subheader">&hellip;</span></li>
								{% endif %}
				
								<!-- for secondlast page -->
								<li>
									<a href="{% url 'data_review_page' group_name_tag page_info.num_pages|add:'-1' %}">
										{{ page_info.num_pages|add:"-1" }}
									</a>
								</li>
							{% endif %}
							
							<!-- for last page -->
							<li>
								<a href="{% url 'data_review_page' group_name_tag page_info.num_pages %}">
									{{ page_info.num_pages }}
								</a>
							</li>
						{% endif %}

						<!-- for text Next >> -->
						<li class="arrow">
							<a href="{% url 'data_review_page' group_name_tag page_info.next_page %}">Next &raquo;</a>
						</li>
				
					{% endif %}

				{% endif %}
			</ul>
		</div>

	{% endif %}
{% endblock %}
<!-- -END of Pagination -->


{% block script %}
// <script type="text/javascript">
	
	// removing left panel:
	$("main.row > aside.columns").detach();

	// making body_content block to take 12-large columns
	$article = $("main.row > article.columns");
	$article.removeClass("medium-10").addClass("large-12");
	$article.css("overflow-x", "scroll");


	// action on edit click:
	function editResRow(oid)
	{
		// fetching resource object row
		var $resRow = $("tr#edit-row-" + oid),
			resRowArr = $resRow.children();

		// processing each element of row
		// for (var i = 5; i < resRowArr.length - 1; i++)
		// {
		// 	aaa = resRowArr[i]
		// };
		// resRowArr.each(function(i){
		// 	console.log(this)
		// })

	}

// </script>
{% endblock %}