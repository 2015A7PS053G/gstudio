{% extends "ndf/base.html" %}
{% load i18n %}
{% load ndf_tags %}
{% load pagination_tags %}
{% get_group_name groupid as group_name_tag %}

{% block style %}

	.right-border{
		border-right: 1px solid #dddddd
	}

	.bottom-border > th {
		border-bottom: 1px solid #f1f1f1;
	}

	article.columns{
		padding-bottom: 0;
		margin-bottom: 2em;
	}

{% endblock %}

{% block body_content %}

<br/>	
<table style="width:auto">
	<thead>
		<tr>
			<th class="text-center right-border" colspan="5">Autogenerated</th>
			<th class="text-center right-border" colspan="5">Base</th>
			<th class="text-center right-border" colspan="7">Attribution</th>
			<th class="text-center right-border" colspan="2">LRMI</th>
			<th class="text-center right-border" colspan="3">Alignment & Level</th>
			<th class="text-center right-border" colspan="7">Curate</th>
			<th class="text-center right-border" colspan="2">Advance</th>
		</tr>
		<tr class="bottom-border">
			<!-- Autogenerated -->
			<th>Id</th>
			<th>Creation date</th>
			<th>Modify by</th>
			<th>Author</th>
			<th class="right-border">Contributors</th>

			<!-- Base -->
			<th>Name</th>
			<th>Altname</th>
			<th>content_org</th>
			<th>Language</th>
			<th class="right-border">tags</th>

			<!-- Attribution -->
			<th>Created by</th>
			<th>Contributed by</th>
			<th>License</th>
			<th>Source</th>
			<th>Basenodeurl</th>
			<th>Translation of</th>
			<th class="right-border">Adaption of</th>

			<!-- LRMI -->
			<th>Educational use</th>
			<th class="right-border">Interactivity Type</th>

			<!-- Alignment and Level -->
			<th>Alignment</th>
			<th>Educational Level</th>
			<th class="right-border">Educational Subject</th>

			<!-- Curate -->
			<th>Curricular</th>
			<th>Audience</th>
			<th>Teaches</th>
			<th>Requires</th>
			<th>Featured</th>
			<th>Status</th>
			<th class="right-border">Acess Policy</th>

			<!-- Advance -->
			<th>Time Required</th>
			<th>Text Complexity</th>

		</tr>

	</thead>
	<tbody>
		<!-- Looping through each resource -->
		{% for resource in files %}
		<tr id="res-row-id-{{resource.pk}}">

			<!-- Autogenerated -->
			<td>{{ resource.pk }}</td>
			<td>{{ resource.created_at }}</td>
			<td>{{ resource.user_details_dict.modified_by }}</td>
			<td>{{ resource.author_set|safeseq|join:", "|default:"-" }}</td>
			<td class="right-border">{{ resource.user_details_dict.contributors | join:", " }}</td>
			
			<!-- Base -->
			<td>{{ resource.name }}</td>
			<td>{{ resource.altnames }}</td>
			<td title="{{ resource.content_org }}">{{ resource.content_org | truncatechars:30 }}</td>
			<td>{{ resource.language }}</td>
			<td class="right-border"> {{resource.tags|safeseq|join:", "}} </td>

			<!-- Attribution -->
			<td>{{ resource.user_details_dict.created_by }}</td>
			<td>{{ resource.user_details_dict.contributors | join:", " }}</td>
			<td>{{ resource.licence }}</td>
			<td>{{ resource.source }}</td>
			<td>{{ resource.basedonurl }}</td>
			<td>{{ resource.translation_of }}</td>
			<td class="right-border">{{ resource.adaption_of }}??</td>

			<!-- LRMI -->
			<td>{{ resource.educationaluse }}</td>
			<td class="right-border">{{ resource.interactivitytype }}</td>

			<!-- Alignment and Level -->
			<td>{{ resource.educationalalignment }}</td>
			<td>{{ resource.educationallevel }}</td>
			<td class="right-border">{{ resource.educationalsubject }}</td>

			<!-- Curate -->
			<td>{{ resource.curricular }}</td>
			<td>{{ resource.audience }}</td>
			<td>
				{% for each_teaches in resource.teaches %}
					{{ each_teaches.name }}
				{% endfor %}
			</td>
			<td><!-- prior_node processing -->
				{% for index_key, each_node in resource.prior_node_dict.items %}
					{{ each_node.name }}
				{% endfor %}
			</td>
			<td>{{ resource.featured }}</td>
			<td>{{ resource.status }}</td>
			<td class="right-border">{{ resource.access_policy }}</td>

			<!-- Advance -->
			<td>{{ resource.timerequired }}</td>
			<td class="right-border">{{ resource.textcomplexity }}</td>
			
		</tr>
		<tr></tr>
		<tr>
			<td class="right-border" colspan="5">
				<div class="button tiny expand" data-id="btn-{{resource.pk}}" onclick="editResRow('{{resource.pk}}')">
					Edit
				</div>
			</td>
			<td class="right-border" colspan="5"></td>
			<td class="right-border" colspan="7"></td>
			<td class="right-border" colspan="2"></td>
			<td class="right-border" colspan="3"></td>
			<td class="right-border" colspan="7"></td>
			<td class="right-border" colspan="2"></td>
		</tr>

		{% endfor %}
	</tbody>
</table>

<!-- END of Looping through each resource -->

{% endblock %}

{% block data_review_pagination %}
	
	<div class="pagination-centered">
		<ul class="pagination" role="menubar" aria-label="Pagination">
		  <li class="arrow unavailable" aria-disabled="true"><a href="">&laquo; Previous</a></li>
		  <li class="current"><a href="">1</a></li>
		  <li><a href="">2</a></li>
		  <li><a href="">3</a></li>
		  <li><a href="">4</a></li>
		  <li class="unavailable" aria-disabled="true"><a href="">&hellip;</a></li>
		  <li><a href="">12</a></li>
		  <li><a href="">13</a></li>
		  <li class="arrow"><a href="">Next &raquo;</a></li>
		</ul>
	</div>

{% endblock %}

{% block script %}
// <script type="text/javascript">
	
	// removing left panel:
	$("main.row > aside.columns").detach();

	// making body_content block to take 12-large columns
	$article = $("main.row > article.columns");
	$article.removeClass("medium-10").addClass("large-12");
	$article.css("overflow-x", "scroll");


	// action on edit click:
	function editResRow(oid)
	{
		// fetching resource object row
		var $resRow = $("tr#res-row-id-" + oid),
			resRowArr = $resRow.children();

		// processing each element of row
		// for (var i = 5; i < resRowArr.length - 1; i++)
		// {
		// 	aaa = resRowArr[i]
		// };
		// resRowArr.each(function(i){
		// 	console.log(this)
		// })

	}

// </script>
{% endblock %}