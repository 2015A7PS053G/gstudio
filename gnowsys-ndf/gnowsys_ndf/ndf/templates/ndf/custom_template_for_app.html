{% extends "ndf/base.html" %}
{% load ndf_tags %}

{% block title %} {{ title }} {% endblock %}

{% block meta_content %}
<ul class="side-nav"> 
  {% for each in app_collection_set %}
  {% get_memberof_objects_count each.id groupid as count %}
  {% ifequal each.id app_set_id %}
  <li class="active"> 
    <div>
    <a href="{% url "GAPPS_set_new_instance" groupid app_name app_id each.id %}" style="float:right" title="Add {{each.name}}">+&nbsp;Add</a>
    <a href="{% url "GAPPS_set" groupid app_name app_id each.id %}" >{{each.name}} ({{count}})</a> 
    </div>
  </li>
    {% else %}
    <li> 
      <div>
      <a href="{% url "GAPPS_set_new_instance" groupid app_name app_id each.id %}" style="float:right" title="Add {{each.name}}">+&nbsp;Add</a>
      <a href="{% url "GAPPS_set" groupid app_name app_id each.id %}" >{{each.name}} ({{count}})</a> 
      </div>
    </li>
    {% endifequal %}
    {% endfor %}
</ul>
{% endblock %}

{% block body_content %} 
{# template for showing apt_set_instance list #}
{% if app_set_template %}
{% if nodes %}
<input class="button deleteObjects" type="button" value="Delete">
<form method="POST" style="float:right; margin-top:15px;padding-top:10px;">
  {% csrf_token %}
  <input name="search" type="textbox" value="" style="width:300px;">
  <input type="hidden" name="class" value="{{class_name}}">
  <input type="submit" value="search" style="width:100px;">
</form>
{% endif %}
<table >
  <thead>
    <tr>
      {% if nodes %}
      <th width="20"> <input class="checkedAll" type="checkbox"></th>
      <th width="150">Title</th>
      <th width="150">Created by</th>
      <th width="150">Creation date</th>
      {% endif %}
    </tr>
  </thead>
  <tbody>
    {% for each in nodes %}
    <tr>
      <td  id="{{each.id}}" class="objectsCheckbox"> <input type="checkbox"> </td>
      <td  class="name" style="font-size:11px;"><a href="{% url "GAPPS_set_instance" groupid app_name app_id app_set_id each.id %}">{{each.name}}</a></td>
      <td  class="created_by" style="font-size:11px;">{{each.created_by}}</td>
      <td  class="created_at" style="font-size:11px;">{{each.created_at}}</td>
    </tr>
    {% empty %}
    <h3>No data to display</h3>
    {% endfor %}
  </tbody>
</table>
{% endif %}

{# template for showing apt_set_instance details #}
{% if app_set_instance_template %}
  <div style="display:table;  border:1px;   border-spacing:15px; " class="small-6 columns">
    <div style="display:table-row;">
      <div style="display:table-cell;"> 
	<font size="3"> {{app_set_name}}'s Title</font> 
      </div>
      <div style="display:table-cell;">
	<font size="3">{{app_set_instance_name}}</font>
      </div>
    </div>
  {% if app_set_instance_atlist %}
  {% for at in app_set_instance_atlist %}
     <div style="display:table-row;">
       <div style="display:table-cell;"> 
	 <font size="3"> {{at.type}} </font> 
       </div>
       <div style="display:table-cell;">
	 <font size="3"> {{at.value}} </font>
       </div>
     </div>
  {% endfor %}
  {% endif %}
  {% if app_set_instance_rtlist %}
  {% for rt in app_set_instance_rtlist %}
     <div style="display:table-row;">
       <div style="display:table-cell;"> 
	 <font size="3"> {{rt.type}} </font> 
       </div>
       <div style="display:table-cell;">
	 <font size="3"> {{rt.value_name}} </font>
       </div>
     </div>
  {% endfor %}
  {% endif %}
     {% if tags %}
     <div style="display:table-row;">
       <div style="display:table-cell;"> 
	 <font size="3"> tags </font> 
       </div>
       <div style="display:table-cell;">
	 <font size="3"> {{tags}} </font>
       </div>
     </div>
     {% endif %}
     {% if content %}
    <div style="display:table-row;">
       <div style="display:table-cell;"> 
	 <font size="3"> content: </font> 
       </div>
    </div>
    <div style="display:block">
    {% with content|safe as description %}
    {{ description }}
    {% endwith %}
    </div>
    {% endif %}
  </div>    
{% endif %}

{# template for showing apt_set_instance new form #}
{% if create_new %}
<form method="POST" action=".">
  {% csrf_token %}
  <div style="display:table;  border:1px;   border-spacing:15px; " class="small-12 columns">
     <div style="display:table-row;">
       <div style="display:table-cell;"> 
	 <font size="3"> {{app_set_name}}'s Title</font> 
       </div>
       <div style="display:table-cell;">
	 <font size="3"> <input type="textbox" name="name"></font>
       </div>
     </div>
     {% if systemtype_attributetype_set %}
     {% for at in systemtype_attributetype_set %}
     <div style="display:table-row;">
       <div style="display:table-cell;"> 
	 <font size="3"> {{at.type}} </font> 
       </div>
       <div style="display:table-cell;">
	 {% if at.value == "bool" %}
	 <select id="id_auto_now_add" name="{{at.type_id}}" style="width:50%">
	   <option selected="selected" value="">Unknown</option>
	   <option value="Yes">Yes</option>
	   <option value="No">No</option>
	 </select>
	 {% else %}
	 <font size="3"> <input type="textbox" name="{{at.type_id}}"></font>
	 {% endif %}
       </div>
     </div>
     {% endfor %}
     {% endif %}
     {% if systemtype_relationtype_set %}
     {% for rt in systemtype_relationtype_set %}
     <div style="display:table-row;">
       <div style="display:table-cell;"> 
	 <font size="3"> {{rt.rt_name}} </font> 
       </div>
       <div style="display:table-cell;">
	 <select id="relation_selection" name="{{rt.type_id}}" style="width:50%">
	   <option selected="selected" value="">Unknown</option>
	   {% for each_gsystem in rt.object_type %}
	   <option value="{{each_gsystem.id}}">{{each_gsystem.name}}</option>
	   {% endfor %}
	 </select>
       </div>
     </div>
     {% endfor %}
     {% endif %}
     <div style="display:table-row;">
       <div style="display:table-cell;"> 
	 <font size="3"> Tags</font> 
       </div>
       <div style="display:table-cell;">
         <input id="tags_id" name="tags" type="textbox" value="" placeholder="Separate tags with commas...">
       </div>
     </div>
    <div style="display:table-row;">
      <div style="display:table-cell;"> 
	<font size="3"> Content</font> 
      </div>
      <div style="display:table-cell">
	<div id="contentlist" class="content">
	  <div class="">
	    {% include "ndf/add_editor.html" with var_name="content_org" var_placeholder="Enter the content here" var_value="" %}
	  </div>
	</div>
      </div>
    </div>



  </div>
  <input type="submit" name="submit" class="button" id="save-system">

</form>
{% endif %}

{% endblock %}

{% block script %}

{% endblock %}	
