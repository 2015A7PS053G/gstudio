{% extends "ndf/base.html" %}
{% load ndf_tags %}
{% block title %}Creating Thread to Forum : {{forum.name}} {% endblock %}

{% block head %}

  <!-- orgitdown! -->
  <script type="text/javascript" src="/static/ndf/orgitdown/jquery.orgitdown-foundation.js"></script>
  <!-- orgitdown! toolbar settings -->
  <script type="text/javascript" src="/static/ndf/orgitdown/skins/gstudio/set.js"></script>
  <!-- orgitdown! skin -->
  <link rel="stylesheet" type="text/css" href="/static/ndf/orgitdown/skins/gstudio/style.css" />

  <style type="text/css">
    #save_form{ margin-top: 2em; }
  </style>
  
{% endblock %}


{% block meta_content %}
    
  <h3>Existing Threads</h3>
  <!-- <hr/> -->
{% endblock %}


{% block help_content %}
  <p>Threads are new ideas on the topic</p>
{% endblock %}


{% block body_content %} 
    
  <h2>Add a new Thread to forum</h2>
  <hr/>

  <form id="create_thread" method="POST">
  {% csrf_token %}

    <!-- forum name   -->
    <div class="row">
      <div class="large-2 medium-4 columns "><h5><b>Thread name : </b></h5></div>
      <div class="large-pull-4 large-6 medium-8 columns">
        <input type="text" placeholder="Enter the name of forum here" 
        name="thread_name" id="thread_name">
      </div>
    </div>
    <br/><br/>

    <!-- Description org editor -->
    <h5><b>Thread Content :</b></h5>
    <div class="row">
      <div class="large-8 large-pull-4 large-offset-4 columns" 
           style="padding:0 1.65em 0 1.4em;">

        <textarea id="orgitdown" name="content_org" 
        placeholder="Some description about forum ..."></textarea>
        <div id="message" style="display:none; color:red"></div>
        <input type="hidden" id="nodes_list" value="#{#{#nodes_list}}">                  
        <!-- <input type="button" id="save_edit_cont" class="button" value="Save"> -->
      </div>
      <br/>

      <!-- Final Create forum button -->
      <div class="large-8 columns">

        <input type="submit" id="forum" value="Create Forum" style="display:none">
        <!-- <input id="forum" type="hidden" value="{{forum}}"> -->
        <input type="button" id="save_form" class="button expand" value="Create thread" onclick="saveforum()">
      </div>

    </div>
 
  </form>

{% endblock %}


{% block script %}

  // <script type="text/javascript">
  $("#node_search_form").parent().hide();

  $(document).ready(function(){
    $("#forum_name").change(function(){

      var name = $("#thread_name").val();
      // var nodes = $("#nodes_list").val();

      if (nodes.indexOf(name) > 0)  
      {
        $("#message").css("display", "block");
        $("#message").html("Name '"+ name +"' already exist .. Please choose another name");
        $("#thread_name").val("");
      }
      else
      {
        $("#message").css("display", "none");
      }

    });
  });

  function saveforum(){
    var name=$("#thread_name").val();
    if (name=="" )
    {
      alert("Please enter forum name");
    }
    else
    {
      $("#forum").trigger('click');
    }
  }


  // ==================================

  // orgitdown
  $('#orgitdown').orgitdown(mySettings);

  // </script>
{% endblock %}